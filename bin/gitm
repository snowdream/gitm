#!/usr/bin/env node

var pjson = require('../package.json');
var program = require('commander');
var asciimo = require('asciimo/lib/asciimo').Figlet;
var colors = require('asciimo/lib/colors'); // add colors for fun
var gitm_recursion = require('./gitm-recursion');

// pick the font file
var font = 'larry3d';
// set text we are writeing to turn into leet ascii art
var text = "SNOWDREAM";
asciimo.write(text, font, function(art) {
    var version = "gitm version "+pjson.version +"\n\n"+ art.green;

    program
        .version(version)
        .command('clone [url]', 'clone all git repositories.')
        .command('checkout [group]', 'checkout all git repositories.')
        .command('fetch', 'fetch all git repositories.')
        .command('pull', 'pull current branch for all git repositories.')
        .parse(process.argv);

    var args = program.args;
    if (args) {
        var argv = process.argv.slice(2);
        if(argv) {
            var command = 'git ' + argv.join(' ');
            gitm_recursion.git_recursion(command);
        }
        process.exit(1);
    }
});

